<?xml version="1.0" encoding="utf-8"?>
<Containers>
  <Beta>False</Beta>
  <Category>Downloaders:</Category>
  <Name>madmanmatt-delugevpn</Name>
  <Description>
    Deluge is a full-featured ​BitTorrent client for Linux, OS X, Unix and Windows. It uses ​libtorrent in its backend and features multiple user-interfaces including: GTK+, web and console. It has been designed using the client server model with a daemon process that handles all the bittorrent activity. The Deluge daemon is able to run on headless machines with the user-interfaces being able to connect remotely from any platform.[br]
    This Docker includes OpenVPN to ensure a secure and private connection to the Internet, including use of iptables to prevent IP leakage when the tunnel is down. It also includes Privoxy to allow unfiltered access to index sites, to use Privoxy please point your application at "host ip:8118"[br][br]
    [b][u][span style='color: #E80000;']Configuration[/span][/u][/b][br]
    [b]/config[/b] This is where deluge will store it's configuration file, database and logs.[br]
    [b]/data[/b] This is where deluge will store data downloaded, watched folder, and archived torrents.[br][br]
    [b][span style='color: #E80000;']Notes[/span][/b][br]
    [u]PIA users[/u][br]
    PIA users will need to supply VPN_USER and VPN_PASS, optionally define VPN_REMOTE (list of gateways https://www.privateinternetaccess.com/pages/client-support/#signup) if you wish to use another remote gateway other than the Netherlands.[br][br]
    [u]AirVPN users[/u][br]
    AirVPN users will need to generate a unique OpenVPN configuration file by using the following link https://airvpn.org/generator/[br][br]
    1. Please select Linux and then choose the country you want to connect to[br]
    2. Save the ovpn file to somewhere safe[br]
    3. Start delugevpn docker to create the folder structure[br]
    4. Stop delugevpn docker[br]
    5. Copy the airvpn ovpn file to the host subfolder "openvpn" which is defined for volume /config[br]
    5. Start delugevpn docker[br]
    6. Check /config/supervisord.log to make sure you are connected to the tunnel[br][br]
    If you wish to allow access to the Deluge daemon (not required for docker to docker communication) then please specify the local LAN IP range for the host(s) requiring access for the env variable LAN_RANGE e.g. 192.168.1.90-192.168.1.100
  </Description>
  <Overview>
    Deluge is a full-featured ​BitTorrent client for Linux, OS X, Unix and Windows. It uses ​libtorrent in its backend and features multiple user-interfaces including: GTK+, web and console. It has been designed using the client server model with a daemon process that handles all the bittorrent activity. The Deluge daemon is able to run on headless machines with the user-interfaces being able to connect remotely from any platform.[br]
    This Docker includes OpenVPN to ensure a secure and private connection to the Internet, including use of iptables to prevent IP leakage when the tunnel is down. It also includes Privoxy to allow unfiltered access to index sites, to use Privoxy please point your application at "host ip:8118"
  </Overview>
  <Support>http://lime-technology.com/forum/index.php?topic=38055.0</Support>
  <Registry>https://registry.hub.docker.com/u/madmanmatt/arch-delugevpn/</Registry>
  <GitHub>https://github.com/madmanmatt/arch-delugevpn</GitHub>
  <Repository>madmanmatt/arch-delugevpn</Repository>
  <BindTime>true</BindTime>
  <Privileged>true</Privileged>
  <Networking>
    <Mode>bridge</Mode>
    <Publish>
      <Port>
        <HostPort>8112</HostPort>
        <ContainerPort>8112</ContainerPort>
        <Protocol>tcp</Protocol>
      </Port>
      <Port>
        <HostPort>58846</HostPort>
        <ContainerPort>58846</ContainerPort>
        <Protocol>tcp</Protocol>
      </Port>
      <Port>
        <HostPort>8118</HostPort>
        <ContainerPort>8118</ContainerPort>
        <Protocol>tcp</Protocol>
      </Port>
    </Publish>
  </Networking>
  <Environment>
    <Variable>
      <Name>VPN_ENABLED</Name>
      <Value>yes</Value>
    </Variable>
    <Variable>
      <Name>VPN_USER</Name>
      <Value>vpn username</Value>
    </Variable>
    <Variable>
      <Name>VPN_PASS</Name>
      <Value>vpn password</Value>
    </Variable>
    <Variable>
      <Name>VPN_REMOTE</Name>
      <Value>nl.privateinternetaccess.com</Value>
    </Variable>
    <Variable>
      <Name>VPN_PORT</Name>
      <Value>1194</Value>
    </Variable>
    <Variable>
      <Name>VPN_PROV</Name>
      <Value>pia|airvpn|custom</Value>
    </Variable>
    <Variable>
      <Name>ENABLE_PRIVOXY</Name>
      <Value>no</Value>
    </Variable>
    <Variable>
      <Name>LAN_RANGE</Name>
      <Value>192.168.1.1-192.168.1.254</Value>
    </Variable>
  </Environment> 
  <Data>
    <Volume>
      <HostDir>path to config</HostDir>
      <ContainerDir>/config</ContainerDir>
      <Mode>rw</Mode>
    </Volume>
    <Volume>
      <HostDir>path for downloads</HostDir>
      <ContainerDir>/data</ContainerDir>
      <Mode>rw</Mode>
    </Volume>
  </Data>
  <WebUI>http://[IP]:[PORT:8112]/</WebUI>
  <Banner>https://raw.githubusercontent.com/madmanmatt/docker-templates/master/madmanmatt/images/deluge-banner.png</Banner>
  <Icon>https://raw.githubusercontent.com/madmanmatt/docker-templates/master/madmanmatt/images/deluge-icon.png</Icon>
</Containers>
